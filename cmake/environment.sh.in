#!/usr/bin/env bash

SUBSOURCE_SCRIPT_NAME="sourcethis.sh"

proj_root_dir="@PROJECT_BINARY_DIR@"


if test "x$ROOT_INCLUDE_PATH" = "x" ; then
  export ROOT_INCLUDE_PATH=${proj_root_dir}
else
  export ROOT_INCLUDE_PATH=${proj_root_dir}:${ROOT_INCLUDE_PATH}
fi

while IFS= read -r -d '' f; do
  echo "Sourcing: $f"
  # shellcheck source=/dev/null
  source "$f"
done < <(find "$proj_root_dir" -type f -name ${SUBSOURCE_SCRIPT_NAME} -print0 | sort -z)
